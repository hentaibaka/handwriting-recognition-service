import{j as e,A as R,c as x,a as k,R as I,r as T,B as P,f as A}from"./index-DfdZsAis.js";import{C as O,F as g,M as o,a as w,u as U,d as V,s as _}from"./validation-BPTeV2mU.js";import{P as D,a as N}from"./PasswordComplexity-CnlXeOz1.js";import{u as $}from"./useMutation-Ccj8ALJx.js";import"./utils-km2FGkQ4.js";const G=({control:s,name:t,rules:a,disabled:d,labelSlot:i})=>e.jsx(O,{control:s,name:t,rules:a,render:({field:p,fieldState:{error:m}})=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-[10px]",children:[e.jsx(R,{id:t,checked:!!p.value,className:x(m&&"border-error"),disabled:d,...p,onCheckedChange:j=>p.onChange(j)}),i]}),e.jsx("span",{className:"h-[20px] block text-sm break-words text-error mt-[4px]",children:m==null?void 0:m.message})]})}),l={firstName:{name:"firstName",label:"Имя"},lastName:{name:"lastName",label:"Фамилия"},middleName:{name:"middleName",label:"Отчество"},email:{name:"email",label:"E-mail"},password:{name:"password",label:"Пароль"},repeatPassword:{name:"repeatPassword",label:"Повторите пароль"},agreementTerms:{name:"agreementTerms",label:""}},H="",K=({control:s,disabled:t,onFieldChange:a})=>e.jsx(g,{control:s,name:l.firstName.name,label:l.firstName.label,rules:{required:"Это поле обязательное",minLength:{value:o,message:`Поле не может быть короче ${o} символов`}},disabled:t,onFieldChange:a}),W=({control:s,disabled:t,onFieldChange:a})=>e.jsx(g,{control:s,name:l.lastName.name,label:l.lastName.label,rules:{required:"Это поле обязательное",minLength:{value:o,message:`Поле не может быть короче ${o} символов`}},disabled:t,onFieldChange:a}),z=({control:s,disabled:t,onFieldChange:a})=>e.jsx(g,{control:s,name:l.middleName.name,label:l.middleName.label,rules:{required:"Это поле обязательное",minLength:{value:o,message:`Поле не может быть короче ${o} символов`}},disabled:t,onFieldChange:a}),B=({control:s,disabled:t,onFieldChange:a})=>e.jsx(g,{control:s,name:l.email.name,label:l.email.label,rules:{required:"Это поле обязательное",minLength:{value:o,message:`Поле не может быть короче ${o} символов`}},disabled:t,onFieldChange:a}),J=({control:s,disabled:t,onFieldChange:a})=>e.jsx(g,{control:s,name:l.password.name,label:l.password.label,rules:{required:"Это поле обязательное",minLength:{value:w,message:`Пароль не может быть короче ${w} символов`}},disabled:t,onFieldChange:a}),Q=({control:s,disabled:t,onFieldChange:a})=>e.jsx(g,{control:s,name:l.repeatPassword.name,label:l.repeatPassword.label,rules:{required:"Это поле обязательное",validate:(d,i)=>d===i[l.password.name]?!0:"Пароли должны совпадать"},disabled:t,onFieldChange:a}),X=({control:s,disabled:t,labelSlot:a})=>e.jsx(G,{control:s,disabled:t,name:l.agreementTerms.name,labelSlot:a,rules:{required:"Это поле обязательное"}}),Y=()=>{const s=k(),{isPending:t,mutate:a}=$({mutationFn:d=>new Promise(i=>setTimeout(()=>i(d),3e3)),onSuccess:()=>{s({pathname:I.recognition})}});return{isPending:t,signUp:a}},Z={firstName:"",lastName:"",middleName:"",email:"",password:"",repeatPassword:"",agreementTerms:!1},ee=({className:s,renderButtonSlot:t})=>{const{control:a,handleSubmit:d,getValues:i,trigger:p}=U({defaultValues:Z,reValidateMode:"onChange",mode:"onChange"}),[m,j]=T.useState({minPasswordLength:!1,notIncludeNameAndEmail:!0,containsNumberOrSymbol:!1,passwordStrength:"Слабая"}),{isPending:r,signUp:S}=Y(),C=n=>{const c=n.length>=w,u=i(l.email.name),h=i(l.firstName.name),b=!!u&&n.includes(u),M=!!h&&n.includes(h),L=!b&&!M,q=V.test(n),E=_.test(n);return{isMatchPasswordLength:c,isMatchNotIncludeNameAndEmail:L,isMatchContainsNumberOrSymbol:q||E}},v=()=>p(l.repeatPassword.name),f=n=>{n&&v();const{isMatchContainsNumberOrSymbol:c,isMatchNotIncludeNameAndEmail:u,isMatchPasswordLength:h}=C(n),b=[h,u,c].filter(Boolean).length;j({containsNumberOrSymbol:c,notIncludeNameAndEmail:u,minPasswordLength:h,passwordStrength:b<=1?"Слабая":b===2?"Нормальная":"Сильная"})},F=()=>f(i(l.password.name)),y=n=>{const c={email:n.email,firstName:n.firstName,lastName:n.lastName,middleName:n.middleName,password:n.password};S(c)};return e.jsxs("form",{className:s,onSubmit:d(y),children:[e.jsxs("div",{className:x("mb-[38px] grid gap-x-[17px] gap-y-[12px] sm:gap-y-[20px] md:gap-y-[10px]","sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-[repeat(3,_318px)]"),children:[e.jsx(W,{disabled:r,control:a}),e.jsx(K,{disabled:r,control:a,onFieldChange:F}),e.jsx(z,{disabled:r,control:a}),e.jsx(B,{disabled:r,control:a,onFieldChange:F}),e.jsx(J,{disabled:r,control:a,onFieldChange:f}),e.jsx(Q,{disabled:r,control:a})]}),e.jsxs(D,{className:"mb-[38px]",children:[e.jsx(N,{isMeetRequirements:m.passwordStrength!=="Слабая",customLabel:e.jsxs("div",{children:[e.jsx("span",{children:"Надежность пароля: "}),e.jsx("span",{className:x(m.passwordStrength==="Слабая"&&"text-error"),children:m.passwordStrength})]})}),e.jsx(N,{isMeetRequirements:m.minPasswordLength,label:"Минимум 8 символов"}),e.jsx(N,{isMeetRequirements:m.notIncludeNameAndEmail,label:"Не может содержать ваше имя или адрес электронной почты"}),e.jsx(N,{isMeetRequirements:m.containsNumberOrSymbol,label:"Содержит число или символ"})]}),e.jsx("div",{className:"mb-[8px]",children:e.jsx(X,{disabled:r,control:a,labelSlot:e.jsxs("div",{className:"text-[0.6875rem] leading-[0.9rem] text-additional-color-7 font-medium",children:[e.jsx("label",{className:"block",htmlFor:l.agreementTerms.name,children:"Регистрируясь для создания учетной записи, я принимаю"}),e.jsx("a",{href:H,target:"_blank",className:"font-semibold text-additional-color-4",children:"Условия использования и Политику конфиденциальности Компании"})]})})}),e.jsxs("div",{className:"flex flex-wrap gap-[23px]",children:[e.jsx(P,{type:"submit",disabled:r,className:"uppercase",children:"Зарегистрироваться"}),t==null?void 0:t({disabled:r})]})]})},se=s=>e.jsxs(P,{type:"button",className:x("bg-additional-color-1 text-accent hover:bg-additional-color-1","disabled:bg-additional-color-1/80 disabled:text-accent/60"),...s,children:[e.jsx(A,{iconName:"vk-logo",className:x("mr-[10px] h-[30px] w-[30px]",s.disabled&&"opacity-60")}),"Войти через VK ID"]}),oe=()=>e.jsxs("div",{className:"py-[30px] px-[16px] sm:py-[30px] sm:px-[50px] lg:py-[27px] lg:px-[66px]",children:[e.jsx(ae,{className:"mb-[13px]"}),e.jsx(ee,{className:"mb-[83px]",renderButtonSlot:({disabled:s})=>e.jsx(se,{disabled:s})})]}),ae=({className:s})=>e.jsx("div",{className:x("text-additional-color-2  font-medium","text-[1.1rem] md:text-[1.3rem] lg:text-[1.375rem] lg:leading-[1.75rem]",s),children:"Регистрация"});export{oe as default};
