import{j as e,B as n,c as t,I as j,r as p,D as w,y as f,z as N,A as P,E as v,F as I,G as F,H as y}from"./index-p7H9IJxa.js";import{F as h,M as u,a as g,u as D}from"./validation-Eb4fYfVm.js";import{u as S}from"./useSignIn-DLmMQUON.js";import{u as E}from"./useMutation-BY5_vBK1.js";import{r as C,O as R}from"./request-CHWoY4Yq.js";class T{static passwordResetCreate(a){return C(R,{method:"POST",url:"/api/password_reset/",body:a,mediaType:"application/json"})}}const k=()=>{const{mutateAsync:s,isPending:a}=E({mutationFn:T.passwordResetCreate});return{rememberPassword:s,isRememberPasswordPending:a}},_=s=>e.jsxs(n,{type:"button",className:t("bg-additional-color-1 text-accent hover:bg-additional-color-1","disabled:bg-additional-color-1/80 disabled:text-accent/60"),...s,children:[e.jsx(j,{iconName:"vk-logo",className:t("mr-[10px] h-[30px] w-[30px]",s.disabled&&"opacity-60")}),"Войти через VK ID"]}),d={email:{name:"email",label:"E-mail"},password:{name:"password",label:"Пароль"}},L=({control:s,disabled:a,onFieldChange:r})=>e.jsx(h,{control:s,name:d.email.name,label:d.email.label,rules:{required:"Это поле обязательное",minLength:{value:u,message:`Поле не может быть короче ${u} символов`}},disabled:a,onFieldChange:r}),M=({control:s,disabled:a,onFieldChange:r})=>e.jsx(h,{control:s,name:d.password.name,label:d.password.label,rules:{required:"Это поле обязательное",minLength:{value:g,message:`Пароль не может быть короче ${g} символов`}},disabled:a,onFieldChange:r}),q={email:"",password:""},A=({className:s,renderButtonSlot:a})=>{const{control:r,handleSubmit:m}=D({defaultValues:q}),{isPending:l,signIn:o}=S(),c=i=>{const x={email:i.email,password:i.password};o(x)};return e.jsxs("form",{className:s,onSubmit:m(c),children:[e.jsxs("div",{className:t("mb-[26px] grid gap-x-[17px] gap-y-[12px] sm:gap-y-[20px] md:gap-y-[30px]","sm:grid-cols-2 xl:grid-cols-[repeat(2,_403px)]"),children:[e.jsx(L,{disabled:l,control:r}),e.jsx(M,{disabled:l,control:r})]}),e.jsxs("div",{className:"mb-[26px] flex flex-wrap gap-[23px]",children:[e.jsx(n,{className:"uppercase",disabled:l,children:"Авторизоваться"}),a==null?void 0:a({disabled:l})]})]})},b="rememberPassword",H=()=>{const[s,a]=p.useState(""),[r,m]=p.useState(!1),{isRememberPasswordPending:l,rememberPassword:o}=k(),c=x=>{a(x.target.value)},i=()=>{o({email:s}).then(()=>m(!0))};return e.jsxs(w,{children:[e.jsx(f,{asChild:!0,children:e.jsx(n,{variant:"link",className:"!p-0 !py-2 !h-fit !text-[1rem]",children:"Забыли пароль?"})}),e.jsxs(N,{className:"max-w-[708px]",children:[e.jsxs(P,{children:[e.jsx(v,{children:"Забыли пароль?"}),e.jsx(I,{children:"Мы отправим вам новый пароль на вашу почту"})]}),e.jsxs("div",{className:"mb-[20px] flex flex-wrap sm:flex-nowrap items-end gap-[13px]",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:b,className:"mb-[8px] text-[0.85rem] md:text-[0.875rem] leading-[1rem] font-deja-vu-sans",children:"E-mail"}),e.jsx(F,{id:b,name:"email",onChange:c})]}),e.jsx(n,{className:"uppercase",disabled:l,onClick:i,children:"Отправить"})]}),r&&e.jsxs("div",{className:"bg-success p-[14px] rounded-[10px] font-deja-vu-sans flex items-center gap-[8px]",children:[e.jsx(y,{disabled:!0,checked:!0,className:"rounded-[6px] !bg-green border-0 cursor-default"}),e.jsx("div",{className:"text-[0.8rem] sm:text-[1rem]",children:"Новый пароль был отправлен"})]})]})]})},U=()=>e.jsxs("div",{className:"py-[30px] px-[16px] sm:py-[30px] sm:px-[50px] lg:py-[27px] lg:px-[66px]",children:[e.jsx(O,{}),e.jsx(A,{renderButtonSlot:({disabled:s})=>e.jsx(_,{disabled:s})}),e.jsx(H,{})]}),O=()=>e.jsx("div",{className:t("mb-[13px] text-additional-color-2 font-medium","text-[1.1rem] md:text-[1.3rem] lg:text-[1.375rem] lg:leading-[1.75rem]"),children:"Авторизация"});export{U as default};
