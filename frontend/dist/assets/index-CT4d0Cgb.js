import{a as j,O as w,j as e,c as b,B as x,r as c,D as P,o as f,q as N,t as v,v as I,w as F,I as D,x as S,y}from"./index-C6TflT0I.js";import{F as h,M as p,a as u,u as C}from"./validation-kowtbJ_6.js";import{u as E}from"./useSignIn-D7xmDXlN.js";import{u as R}from"./useMutation-CEzIW2sW.js";class T{static passwordResetCreate(s){return j(w,{method:"POST",url:"/api/password_reset/",body:s,mediaType:"application/json"})}}const k=()=>{const{mutateAsync:a,isPending:s}=R({mutationFn:T.passwordResetCreate});return{rememberPassword:a,isRememberPasswordPending:s}},n={email:{name:"email",label:"E-mail"},password:{name:"password",label:"Пароль"}},_=({control:a,disabled:s,onFieldChange:r})=>e.jsx(h,{control:a,name:n.email.name,label:n.email.label,rules:{required:"Это поле обязательное",minLength:{value:p,message:`Поле не может быть короче ${p} символов`}},disabled:s,onFieldChange:r}),q=({control:a,disabled:s,onFieldChange:r})=>e.jsx(h,{control:a,name:n.password.name,label:n.password.label,rules:{required:"Это поле обязательное",minLength:{value:u,message:`Пароль не может быть короче ${u} символов`}},disabled:s,onFieldChange:r}),L={email:"",password:""},M=({className:a,renderButtonSlot:s})=>{const{control:r,handleSubmit:t}=C({defaultValues:L}),{isPending:l,signIn:d}=E(),m=i=>{const o={email:i.email,password:i.password};d(o)};return e.jsxs("form",{className:a,onSubmit:t(m),children:[e.jsxs("div",{className:b("mb-[26px] grid gap-x-[17px] gap-y-[12px] sm:gap-y-[20px] md:gap-y-[30px]","sm:grid-cols-2 xl:grid-cols-[repeat(2,_403px)]"),children:[e.jsx(_,{disabled:l,control:r}),e.jsx(q,{disabled:l,control:r})]}),e.jsxs("div",{className:"mb-[26px] flex flex-wrap gap-[23px]",children:[e.jsx(x,{className:"uppercase",disabled:l,children:"Авторизоваться"}),s==null?void 0:s({disabled:l})]})]})},g="rememberPassword",O=()=>{const[a,s]=c.useState(""),[r,t]=c.useState(!1),{isRememberPasswordPending:l,rememberPassword:d}=k(),m=o=>{s(o.target.value)},i=()=>{d({email:a}).then(()=>t(!0))};return e.jsxs(P,{children:[e.jsx(f,{asChild:!0,children:e.jsx(x,{variant:"link",className:"!p-0 !py-2 !h-fit !text-[1rem]",children:"Забыли пароль?"})}),e.jsxs(N,{className:"max-w-[708px]",children:[e.jsxs(v,{children:[e.jsx(I,{children:"Забыли пароль?"}),e.jsx(F,{children:"Мы отправим вам новый пароль на вашу почту"})]}),e.jsxs("div",{className:"mb-[20px] flex flex-wrap sm:flex-nowrap items-end gap-[13px]",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:g,className:"mb-[8px] text-[0.85rem] md:text-[0.875rem] leading-[1rem] font-deja-vu-sans",children:"E-mail"}),e.jsx(D,{id:g,name:"email",onChange:m})]}),e.jsx(x,{className:"uppercase",disabled:l,onClick:i,children:"Отправить"})]}),r&&e.jsxs("div",{className:"bg-success p-[14px] rounded-[10px] font-deja-vu-sans flex items-center gap-[8px]",children:[e.jsx(S,{disabled:!0,checked:!0,className:"rounded-[6px] !bg-green border-0 cursor-default"}),e.jsx("div",{className:"text-[0.8rem] sm:text-[1rem]",children:"Новый пароль был отправлен"})]})]})]})},B=()=>e.jsxs("div",{className:"py-[30px] px-[16px] sm:py-[30px] sm:px-[50px] lg:py-[27px] lg:px-[66px]",children:[e.jsx(A,{}),e.jsx(M,{renderButtonSlot:({disabled:a})=>y}),e.jsx(O,{})]}),A=()=>e.jsx("div",{className:b("mb-[13px] text-additional-color-2 font-medium","text-[1.1rem] md:text-[1.3rem] lg:text-[1.375rem] lg:leading-[1.75rem]"),children:"Авторизация"});export{B as default};
